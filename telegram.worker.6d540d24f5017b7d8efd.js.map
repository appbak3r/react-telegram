{"version":3,"sources":["../webpack/bootstrap","../node_modules/eventemitter3/index.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","config/environmentDefault.ts","config/environmentProduction.ts","config/environment.ts","../node_modules/@babel/runtime/helpers/esm/createClass.js","services/TelegramClient.ts","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","services/telegram.worker.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","has","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","events","names","slice","getOwnPropertySymbols","concat","listeners","handlers","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","_defineProperty","obj","configurable","writable","_objectSpread","target","source","ownKeys","keys","filter","sym","getOwnPropertyDescriptor","forEach","apiHash","process","environmentDefault","apiId","isLoggerEnabled","environmentProduction","environment","_defineProperties","props","descriptor","TelegramClient","tdWasm","options","instance","Constructor","_classCallCheck","tdFunctions","client","eventEmitter","td_create","cwrap","td_destroy","td_send","td_execute","td_receive","td_set_verbosity","loopReceive","send","@type","parameters","use_test_dc","database_directory","files_directory","use_file_database","use_message_database","api_id","api_hash","system_language_code","device_model","navigator","appVersion","system_version","application_version","appName","enable_storage_optimizer","@extra","protoProps","staticProps","message","JSON","stringify","result","parsedResult","parse","eventName","callback","_this","receive","setTimeout","importScripts","debouncedSave","timeout","FS","self","clearTimeout","console","log","syncfs","err","Module","then","tdWASM","startInterval","setInterval","syncdone","clearInterval","telegramClient","postMessage","onmessage","action","data","type","payload"],"mappings":"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","file":"telegram.worker.6d540d24f5017b7d8efd.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/react-telegram/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty,\n    prefix = '~';\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\n\nfunction Events() {} //\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\n\n\nif (Object.create) {\n  Events.prototype = Object.create(null); //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n\n  if (!new Events().__proto__) prefix = false;\n}\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\n\n\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\n\n\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once),\n      evt = prefix ? prefix + event : event;\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);else emitter._events[evt] = [emitter._events[evt], listener];\n  return emitter;\n}\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\n\n\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();else delete emitter._events[evt];\n}\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\n\n\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\n\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = [],\n      events,\n      name;\n  if (this._eventsCount === 0) return names;\n\n  for (name in events = this._events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\n\n\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event,\n      handlers = this._events[evt];\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\n\n\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event,\n      listeners = this._events[evt];\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\n\n\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n  if (!this._events[evt]) return false;\n  var listeners = this._events[evt],\n      len = arguments.length,\n      args,\n      i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1:\n        return listeners.fn.call(listeners.context), true;\n\n      case 2:\n        return listeners.fn.call(listeners.context, a1), true;\n\n      case 3:\n        return listeners.fn.call(listeners.context, a1, a2), true;\n\n      case 4:\n        return listeners.fn.call(listeners.context, a1, a2, a3), true;\n\n      case 5:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n\n      case 6:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len - 1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length,\n        j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1:\n          listeners[i].fn.call(listeners[i].context);\n          break;\n\n        case 2:\n          listeners[i].fn.call(listeners[i].context, a1);\n          break;\n\n        case 3:\n          listeners[i].fn.call(listeners[i].context, a1, a2);\n          break;\n\n        case 4:\n          listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n          break;\n\n        default:\n          if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n  if (!this._events[evt]) return this;\n\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {\n        events.push(listeners[i]);\n      }\n    } //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n\n\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;else clearEvent(this, evt);\n  }\n\n  return this;\n};\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n}; //\n// Alias methods names because people roll like that.\n//\n\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on; //\n// Expose the prefix.\n//\n\nEventEmitter.prefixed = prefix; //\n// Allow `EventEmitter` to be imported as module namespace.\n//\n\nEventEmitter.EventEmitter = EventEmitter; //\n// Expose the module.\n//\n\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import { IEnvironment } from './environment';\n\nconst apiId   = process.env.REACT_APP_TELEGRAM_API_ID;\nconst apiHash = process.env.REACT_APP_TELEGRAM_API_HASH;\n\nif (!apiId || !apiHash) {\n  throw new Error('api_id and api_hash are not defined');\n}\n\nexport const environmentDefault: IEnvironment = {\n  apiId,\n  apiHash,\n  isLoggerEnabled: true,\n};","import { IEnvironment } from './environment';\nimport { environmentDefault } from './environmentDefault';\n\nexport const environmentProduction: IEnvironment = {\n  ...environmentDefault,\n  isLoggerEnabled: false,\n};","import { environmentDefault } from './environmentDefault';\nimport { environmentProduction } from './environmentProduction';\n\nexport interface IEnvironment {\n  apiId: string;\n  apiHash: string;\n  isLoggerEnabled: boolean;\n}\n\nexport let environment: IEnvironment = {\n  ...environmentDefault,\n};\n\nif (process.env.NODE_ENV === 'production') {\n  environment = {\n    ...environmentProduction,\n  };\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import EventEmitter from 'eventemitter3';\n\nconst TD_RECEIVE_DELAY = 100;\n\nexport const TELEGRAM_CLIENT_SEND    = 'send';\nexport const TELEGRAM_CLIENT_RECEIVE = 'receive';\n\ninterface TelegramClientOptions {\n  apiId: string;\n  apiHash: string;\n}\n\nexport class TelegramClient {\n  private tdFunctions: any;\n  private client: any;\n  private eventEmitter: EventEmitter = new EventEmitter();\n  \n  constructor (private tdWasm: any, options: TelegramClientOptions) {\n    this.tdFunctions = {\n      td_create: tdWasm.cwrap('td_create', 'number', []),\n      td_destroy: tdWasm.cwrap('td_destroy', null, ['number']),\n      td_send: tdWasm.cwrap('td_send', null, ['number', 'string']),\n      td_execute: tdWasm.cwrap('td_execute', null, ['number', 'string']),\n      td_receive: tdWasm.cwrap('td_receive', 'string', ['number']),\n      td_set_verbosity: tdWasm.cwrap('td_set_verbosity', null, ['number'])\n    };\n    \n    this.create();\n    \n    this.tdFunctions.td_set_verbosity(2);\n    \n    this.loopReceive();\n    \n    this.send({\n      '@type': 'setTdlibParameters',\n      parameters: {\n        use_test_dc: true,\n        database_directory: '/telegram_data',\n        files_directory: '/telegram_data',\n        use_file_database: false,\n        use_message_database: true,\n        api_id: options.apiId,\n        api_hash: options.apiHash,\n        system_language_code: 'en',\n        device_model: navigator.appVersion,\n        system_version: navigator.appVersion,\n        application_version: navigator.appName,\n        enable_storage_optimizer: true,\n      },\n      '@extra': {\n        '@type': 'setTdlibParameters',\n      }\n    });\n    \n    this.send({ '@type': 'checkDatabaseEncryptionKey' });\n  }\n  \n  execute (message: any): void {\n    this.tdFunctions.td_execute(this.client, JSON.stringify(message));\n  }\n  \n  send (message: any): void {\n    this.eventEmitter.emit(TELEGRAM_CLIENT_SEND, message);\n    \n    this.tdFunctions.td_send(this.client, JSON.stringify(message));\n  }\n  \n  receive (): any {\n    const result = this.tdFunctions.td_receive(this.client);\n    \n    if (result) {\n      const parsedResult = JSON.parse(result);\n      \n      this.eventEmitter.emit(TELEGRAM_CLIENT_RECEIVE, parsedResult);\n      \n      return parsedResult;\n    } else {\n      return null;\n    }\n  }\n  \n  addListener (eventName: string, callback: any, context?: any): void {\n    this.eventEmitter.addListener(eventName, callback, context);\n  }\n  \n  removeListener (eventName: string, callback: any, context?: any): void {\n    this.eventEmitter.removeListener(eventName, callback, context);\n  }\n  \n  private loopReceive (): void {\n    const result = this.receive();\n    \n    if (!result) {\n      setTimeout(() => {\n        this.loopReceive();\n      }, TD_RECEIVE_DELAY);\n    } else {\n      this.loopReceive();\n    }\n  }\n  \n  private create (): void {\n    this.client = this.tdFunctions.td_create();\n  }\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import { environment } from '../config/environment';\n\nimport { TELEGRAM_CLIENT_RECEIVE, TelegramClient } from './TelegramClient';\n\nimportScripts('/td_wasm/td_wasm.js');\n\n/**\n * TDLib WASM loader\n */\n\nconst debouncedSave = (() => {\n  let timeout: number;\n  \n  return (FS: any) => {\n    if (timeout) {\n      self.clearTimeout(timeout);\n    }\n    \n    console.log('Syncing...');\n    \n    timeout = self.setTimeout(() => {\n      FS.syncfs(false, function (err: any) {\n        if (err) {\n          console.log(err);\n        } else {\n          console.log('Synced!');\n        }\n      });\n    }, 500);\n  };\n})();\n\n\n(self as any).Module().then((tdWASM: any) => {\n  let startInterval: number;\n  \n  startInterval = self.setInterval(() => {\n    if (!(self as any).syncdone) {\n      return;\n    }\n    \n    self.clearInterval(startInterval);\n    \n    const telegramClient = new TelegramClient(tdWASM, {\n      apiId: environment.apiId,\n      apiHash: environment.apiHash,\n    });\n    \n    telegramClient.addListener(TELEGRAM_CLIENT_RECEIVE, (message: any) => {\n      \n      debouncedSave(tdWASM.FS);\n      \n      postMessage(message);\n    });\n    \n    self.onmessage = (event) => {\n      const action = event.data;\n      \n      switch (action.type) {\n        case 'send': {\n          telegramClient.send(action.payload);\n          \n          break;\n        }\n        \n        default: {\n          console.log('telegram worker: unknown action');\n        }\n      }\n    };\n    \n  }, 500);\n});\n\n\n\n"],"sourceRoot":""}